<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="laptop">

	<!-- Laptop List 구하기 -->
	<select id = "list" resultType="mybatis.vo.LaptopVO" parameterType="mybatis.vo.LaptopVO">
		SELECT * FROM laptop l INNER JOIN cpu_Bench c ON (c.cpu_Name LIKE '%'||l.cpu_Name)
		
		<choose>
			<when test="gpu_Point != 0">
				<!-- gpu_Point에 들어오는 값이 있을 때 -->
				INNER JOIN gpu_Bench g ON (g.gpu_Name LIKE '%'||l.gpu_Name) WHERE gpu_Point <![CDATA[>=]]> #{gpu_Point} AND
			</when>
			<when test="gpu_Point == 0">
				<!-- gpu_Point에 들어오는 값이 없을 때 -->
				WHERE
			</when>
		</choose>
		
		cpu_Point <![CDATA[>=]]> #{cpu_Point} AND laptop_OS=#{laptop_OS} AND 
		
		<if test="laptop_MonitorSize != null">
			laptop_MonitorSize=#{laptop_MonitorSize} AND 
		</if> 
		
		<if test="laptop_weight != null">
			<choose>
				<when test="laptop_weight == 0">
					laptop_weight <![CDATA[<]]> 1.5
				</when>
				<when test="laptop_weight == 1">
					laptop_weight BETWEEN 1.5 and 1.9
				</when>
				<when test="laptop_weight == 2">
					laptop_weight <![CDATA[>]]> 1.9
				</when>
			</choose>
		</if>
				
	</select>
	
	<!-- 프로그램  cpu, gpu점수 구하기 -->
	<select id="program" resultType="mybatis.vo.Program_BenchVO" parameterType="java.util.Map">
		SELECT * FROM program_Bench WHERE program_Name=#{program_Name}
	</select>
</mapper>